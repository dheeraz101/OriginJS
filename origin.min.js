(()=>{const c=(window.ORIGIN_CONFIG||{}).mode||"auto",p="data-origin-author";let s=!1,a=null;const g=document.createElement("style");g.textContent=`
  .origin-badge {
    position: absolute;
    bottom: 12px;
    right: 12px;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(0,0,0,.65);
    color: #fff;
    font: 600 14px system-ui,-apple-system;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    backdrop-filter: blur(6px);
    opacity: .85;
    transition: opacity .2s ease, background .2s ease;
    z-index: 10;
  }

  .origin-badge:hover { opacity: 1; }
  .origin-badge:focus { outline: 2px solid #007aff; }

  /* Visual-only verified state */
  .origin-verified {
    background: rgba(0,122,255,.85);
  }

  .origin-hover .origin-badge {
    opacity: 0;
    pointer-events: none;
  }

  .origin-hover:hover .origin-badge,
  .origin-hover:focus-within .origin-badge {
    opacity: .85;
    pointer-events: auto;
  }

  .origin-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.35);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }

  .origin-card {
    width: 320px;
    background: #fff;
    border-radius: 14px;
    padding: 18px;
    font: 14px system-ui,-apple-system;
    box-shadow: 0 20px 40px rgba(0,0,0,.15);
  }

  .origin-title {
    font-weight: 600;
    margin-bottom: 10px;
  }

  .origin-row {
    margin-bottom: 8px;
    color: #444;
  }

  .origin-row span {
    color: #888;
  }

  .origin-note {
    font-size: 12px;
    color: #888;
    margin-top: 10px;
  }

  .origin-close {
    margin-top: 14px;
    text-align: right;
    color: #007aff;
    cursor: pointer;
    font-weight: 500;
  }`,document.head.appendChild(g);const u=e=>{try{return new Date(e).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}catch{return e}};function d(e){if(s)return;s=!0;const i=document.createElement("div");i.className="origin-overlay",i.setAttribute("role","dialog"),i.setAttribute("aria-modal","true"),i.innerHTML=`
      <div class="origin-card">
        <div class="origin-title">Content origin</div>

        <div class="origin-row"><span>Author:</span> ${e.author||"\u2014"}</div>
        <div class="origin-row"><span>Source:</span> ${e.source||"\u2014"}</div>
        <div class="origin-row"><span>Published:</span> ${e.date||"\u2014"}</div>
        <div class="origin-row"><span>Type:</span> ${e.type||"\u2014"}</div>
        ${e.verified?'<div class="origin-row"><span>Status:</span> Publisher-verified</div>':""}

        <div class="origin-note">
          This shows origin metadata. It does not verify truth or trustworthiness.
        </div>

        <div class="origin-close" tabindex="0">Close</div>
      </div>
    `;const t=()=>{i.remove(),s=!1,document.removeEventListener("keydown",r),a&&a.focus()};i.addEventListener("click",o=>{o.target===i&&t()});const n=i.querySelector(".origin-close");n.onclick=t,n.onkeydown=o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),t())};const r=o=>{o.key==="Escape"&&(o.preventDefault(),t())};document.addEventListener("keydown",r),document.body.appendChild(i),n.focus()}function f(e){if(c==="manual")return;getComputedStyle(e).position==="static"&&(e.style.position="relative"),c==="hover"&&e.classList.add("origin-hover");const i=e.dataset.originVerified==="true",t=document.createElement("div");t.className="origin-badge"+(i?" origin-verified":""),t.textContent="i",t.tabIndex=0,t.setAttribute("role","button"),t.setAttribute("aria-label","View content origin");const n={author:e.dataset.originAuthor,source:e.dataset.originSource,date:u(e.dataset.originDate),type:e.dataset.originType,verified:i};t.onclick=()=>{a=t,d(n)},t.onkeydown=r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),a=t,d(n))},e.appendChild(t)}window.Origin={show:e=>{e?.dataset&&d({author:e.dataset.originAuthor,source:e.dataset.originSource,date:u(e.dataset.originDate),type:e.dataset.originType,verified:e.dataset.originVerified==="true"})}};const l=()=>document.querySelectorAll(`[${p}]`).forEach(f);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})();
